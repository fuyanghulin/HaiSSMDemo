<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cm.cn.mapper.MyDriveruserMapper" >
  <resultMap id="BaseResultMap" type="cm.cn.po.HlPeople" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="VARCHAR" />
    <result column="birthday" property="birthday" jdbcType="DATE" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="drive_licence" property="driveLicence" jdbcType="VARCHAR" />
    <result column="dri_licence_time" property="driLicenceTime" jdbcType="DATE" />
    <result column="compay_id" property="compayId" jdbcType="INTEGER" />
    <result column="drivezigezheng" property="drivezigezheng" jdbcType="VARCHAR" />
    <result column="driverzigezheng_time" property="driverzigezhengTime" jdbcType="DATE" />
    <result column="safe_licence" property="safeLicence" jdbcType="VARCHAR" />
    <result column="safe_licence_time" property="safeLicenceTime" jdbcType="DATE" />
    <result column="charge_licence" property="chargeLicence" jdbcType="VARCHAR" />
    <result column="charge_licence_time" property="chargeLicenceTime" jdbcType="DATE" />
    <result column="upload_licence" property="uploadLicence" jdbcType="VARCHAR" />
    <result column="upload_licence_time" property="uploadLicenceTime" jdbcType="DATE" />
    <result column="driver_type" property="driverType" jdbcType="VARCHAR" />
    <result column="adresss" property="adresss" jdbcType="VARCHAR" />
    <result column="reserve_one" property="reserveOne" jdbcType="VARCHAR" />
    <result column="reserve_two" property="reserveTwo" jdbcType="VARCHAR" />
    <result column="reserve_three" property="reserveThree" jdbcType="VARCHAR" />
    <result column="picture_name" property="pictureName" jdbcType="VARCHAR" />
    <result column="picture_url" property="pictureUrl" jdbcType="VARCHAR" />
    <result column="people_type" property="peopleType" jdbcType="VARCHAR" />
    <result column="people_status" property="peopleStatus" jdbcType="VARCHAR" />
  </resultMap>
   <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 15:18:21 CST 2017.
    -->
    id, name, sex, birthday, phone, drive_licence, dri_licence_time, compay_id, drivezigezheng, 
    driverzigezheng_time, safe_licence, safe_licence_time, charge_licence, charge_licence_time, 
    upload_licence, upload_licence_time, driver_type, adresss, reserve_one, reserve_two, 
    reserve_three, picture_name, picture_url, people_type, people_status
  </sql>
	<delete id="delDriveruserBatch">
		DELETE
		FROM
			hl_driverUser
		WHERE
			hl_people_id IN 
		<foreach collection="array" item="id" index="index"
	          open="(" close=")" separator=",">
	          #{id}
	    </foreach>
	</delete>
	<select id="selectDriverUserMsgByPhone" parameterType="String" resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM
			hl_people
		WHERE
			id = (
				SELECT
					hl_people_id
				FROM
					hl_driveruser
				WHERE
					phone = #{phone}
			);
	</select>
	<select id="selectCompanyLinkManPhone" parameterType="String" resultType="String">
		SELECT
			linkman_phone
		FROM
			hl_company
		WHERE
			id = (
				SELECT
					compay_id
				FROM
					hl_people
				WHERE
					id = (
						SELECT
							hl_people_id
						FROM
							hl_driveruser
						WHERE
							phone = #{phone}
					)
			)
	</select>
</mapper>