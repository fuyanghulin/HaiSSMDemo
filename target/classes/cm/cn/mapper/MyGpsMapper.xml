<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cm.cn.mapper.MyGpsMapper" >
  <resultMap id="BaseResultMap" type="cm.cn.po.Gpsinfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 28 10:55:13 CST 2017.
    -->
    <id column="gpsId" property="gpsid" jdbcType="INTEGER" />
    <result column="createDate" property="createdate" jdbcType="TIMESTAMP" />
    <result column="deleted" property="deleted" jdbcType="BIT" />
    <result column="owner" property="owner" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="tenantId" property="tenantid" jdbcType="INTEGER" />
    <result column="alarmState" property="alarmstate" jdbcType="INTEGER" />
    <result column="altitude" property="altitude" jdbcType="DOUBLE" />
    <result column="commandId" property="commandid" jdbcType="INTEGER" />
    <result column="direction" property="direction" jdbcType="INTEGER" />
    <result column="gas" property="gas" jdbcType="DOUBLE" />
    <result column="latitude" property="latitude" jdbcType="DOUBLE" />
    <result column="location" property="location" jdbcType="VARCHAR" />
    <result column="longitude" property="longitude" jdbcType="DOUBLE" />
    <result column="mileage" property="mileage" jdbcType="DOUBLE" />
    <result column="plateNo" property="plateno" jdbcType="VARCHAR" />
    <result column="recordVelocity" property="recordvelocity" jdbcType="DOUBLE" />
    <result column="runStatus" property="runstatus" jdbcType="VARCHAR" />
    <result column="sendTime" property="sendtime" jdbcType="TIMESTAMP" />
    <result column="simNo" property="simno" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="valid" property="valid" jdbcType="BIT" />
    <result column="velocity" property="velocity" jdbcType="DOUBLE" />
    <result column="signal_v" property="signalV" jdbcType="INTEGER" />
  </resultMap>
  <select id="selectGpsByPlateNo"  parameterType="String" resultType="cm.cn.po.Gpsinfo" statementType="STATEMENT">
		SELECT *FROM 
                ${tableName}
        where plateNo='${plateNo}'
        order by createDate desc limit 1
  </select>
  <select id="selectMaxVelocity" parameterType="String" resultType="String" statementType="STATEMENT">
		SELECT
			max( velocity ) 
		FROM
			${tableName} 
		WHERE
			plateNo = '${plateNo}'
  </select>
  <select id="selectOverSpeedTimes" parameterType="String" resultType="String" statementType="STATEMENT">
		SELECT
			COUNT( * ) 
		FROM
			${tableName}
		WHERE
			plateNo = '${plateNo}' 
			AND velocity > 85
  </select>
</mapper>